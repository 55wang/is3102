<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:p="http://primefaces.org/ui"
      xmlns:em="http://xmlns.jcp.org/jsf/composite/emcomp">

    <cc:interface>
        <cc:attribute name="context" required="true"/>
    </cc:interface>

    <cc:implementation>
        <f:view>
            <em:cssImport></em:cssImport>
            <div id="register-form-container" class="h-center">
                <h:form>
                    <p:growl id="growl" sticky="true" showDetail="true"/>

                    <p:wizard widgetVar="myWizard" showNavBar="false">
                        <c:if test="#{cc.attrs.context == 'apply_card_account'}">
                            <p:tab id="account" title="1. Apply">
                                <p:panel style=" padding-top: 50px ; margin-left: 8% ">
                                    <p:messages />
                                    <table style="margin-top:-90px ">

                                        <tr><div class="h-center"  style="margin-top:80px">
                                                <h:outputText style="font-weight:bolder" value="Choose your Credit Card account: " />
                                                <p:selectOneMenu value="#{newCardManagedBean.selectedProductName}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                                    <f:selectItems value="#{newCardManagedBean.productNameOptions}" />

                                                </p:selectOneMenu>

                                            </div></tr>
                                        <tr><div>
                                                <p style="margin-left:17%; margin-top:30px"> Terms and Conditions</p>
                                            </div></tr>
                                        <tr><p:scrollPanel mode="native" style="width:500px;height:200px;margin-left:17%;margin-top:0px;border:1px solid grey">
                                                <p>
                                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean blandit tortor a ipsum vehicula, in semper sapien auctor. Nulla tempor eget est non consequat. Nulla sit amet lorem justo. Cras non tellus eros. Sed ultricies orci ut quam interdum fringilla. Nam vitae massa ac mi elementum mattis vel vitae sem. Ut eros ipsum, scelerisque a erat a, eleifend luctus nibh. Interdum et malesuada fames ac ante ipsum primis in faucibus.
                                                </p>
                                                <p>
                                                    Vivamus ac ullamcorper magna. Aenean felis ante, elementum sit amet urna at, eleifend aliquet velit. Morbi a convallis magna. In nec leo vel dolor hendrerit pharetra. Cras in iaculis enim. Aenean porta sapien dignissim turpis dapibus, eu dictum velit elementum. Aliquam sollicitudin gravida luctus.
                                                </p>
                                                <p>
                                                    Ut vel nulla sit amet erat laoreet eleifend nec sed lacus. Quisque placerat diam vitae justo eleifend, rutrum mollis mauris fringilla. Curabitur turpis odio, euismod id lorem a, ultricies suscipit ligula. Pellentesque ut erat a leo rhoncus porta ac sed velit. Nunc at erat ligula. Fusce vehicula posuere interdum. Curabitur tempus, tortor at sollicitudin dapibus, erat ante varius nisl, id dictum erat ipsum porttitor ipsum. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla id varius enim, sed rutrum orci.
                                                </p>
                                                <p>
                                                    Sed tincidunt urna quis metus lacinia commodo. Praesent convallis eros vel quam scelerisque bibendum. Mauris eget dignissim libero. Pellentesque sagittis sem quis ipsum viverra, sed consequat mi consectetur. Donec facilisis dapibus ultrices. Donec luctus auctor lacus, at congue nisi aliquet eu. Praesent in justo at risus faucibus ultricies. Fusce et libero lectus. Donec elementum pharetra sapien, at placerat purus sodales et. Vivamus iaculis lacus sed placerat rhoncus. Mauris iaculis sit amet nunc at placerat. Donec consequat euismod lacinia. Etiam nec quam vehicula, cursus massa in, ullamcorper erat.
                                                </p>
                                                <p>
                                                    Praesent volutpat scelerisque vestibulum. In eu massa non neque rutrum commodo. Nunc vel enim nisi. Aenean leo ipsum, molestie vel justo nec, pharetra luctus dui. Nunc rhoncus turpis id lorem luctus consequat. Nulla condimentum adipiscing turpis consequat semper. Etiam ullamcorper velit nec hendrerit malesuada. Praesent venenatis leo sit amet arcu commodo, sit amet porta tellus suscipit. Quisque mi tortor, vestibulum in arcu non, pretium auctor libero. In commodo luctus placerat.
                                                </p>
                                            </p:scrollPanel></tr>


                                        <tr><div  style="margin-left: 17%; margin-top: 30px" >
                                                <input type="checkbox" name="term" value="Term" id="TCcheck">I acknowledge and agree to the above. </input>
                                            </div></tr>
                                    </table>
                                </p:panel>
                                <div class="register-form-button" style="margin-top: 120px">
                                    <p:commandButton class="h-center"  value="Next" type="button" onclick="myFunction()" />
                                    <script>
                                        function myFunction() {
                                            if (document.getElementById("TCcheck").checked === false) {
                                                alert("Please read and agree to the Terms and Conditions first!");
                                            } else {
                                                PF('myWizard').next();
                                            }
                                        }
                                    </script>
                                </div>
                            </p:tab>
                        </c:if>
                        <p:tab id="basic" title="2. Basic Information" >
                            <p:panel>
                                <p:messages />
                                <h:panelGrid columns="2" columnClasses="label, value">

                                    <h:outputText value="Last Name: " />
                                    <p:inputText value="#{newCardManagedBean.c.lastname}" required="true" requiredMessage="Last name is required." validatorMessage="Invalid last name.">
                                        <f:validateLength minimum="2" />
                                    </p:inputText>

                                    <h:outputText value="First Name: " />
                                    <p:inputText id="firstName" value="#{newCardManagedBean.c.firstname}" required="true" requiredMessage="First name is required." validatorMessage="Invalid first name.">
                                        <f:validateLength minimum="2" />
                                    </p:inputText>

                                    <h:outputText value="Name Appear On Card: " />
                                    <p:inputText value="#{newCardManagedBean.cca.nameOnCard}" required="true"/>

                                    <h:outputText value="Identity Type: " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedIdentityType}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.identityTypeOptions}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Identity Number: " />
                                    <p:inputText value="#{newCardManagedBean.c.identityNumber}" required="true" requiredMessage="Identity number is required." validatorMessage="Invalid identity number.">
                                        <f:validateRegex
                                            pattern="^[A-Za-z0-9]{9}$" />
                                    </p:inputText>

                                    <h:outputText value="Gender " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedGender}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.genderOptions}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Date of Birth: " />
                                    <p:calendar value="#{newCardManagedBean.c.birthDay}" navigator="true" yearRange="c-100:c+0" required="true" requiredMessage="DOB is required." 
                                                pattern="yyyy-MM-dd" maxdate="#{newCardManagedBean.currentDate}"/>

                                </h:panelGrid>

                                <div class="register-form-button">
                                    <p:commandButton value="Back" type="button" onclick="PF('myWizard').back();" />
                                    <p:commandButton value="Next" type="button" onclick="PF('myWizard').next();"/>

                                </div>
                            </p:panel>
                        </p:tab>
                        <p:tab id="next" title="3. More Information" >
                            <p:panel>
                                <p:messages />
                                <h:panelGrid columns="2" columnClasses="label, value">

                                    <h:outputText value="Nationality: " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedNationality}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.nationalityOptions}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Education Level: " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedEducation}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.educationOptions}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Income " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedIncome}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.incomeOptions}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Employment Status: " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedEmploymentStatus}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.employmentStatusOptions}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Industry: " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedIndustry}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.industryOptions}" />
                                    </p:selectOneMenu>

                                </h:panelGrid>

                                <div class="register-form-button">
                                    <p:commandButton value="Back" type="button" onclick="PF('myWizard').back();" />
                                    <p:commandButton value="Next" type="button" onclick="PF('myWizard').next();"/>

                                </div>
                            </p:panel>
                        </p:tab>
                        <p:tab id="identity" title="4. Contact Details" >
                            <p:panel>
                                <p:messages />
                                <h:panelGrid columns="2" columnClasses="label, value">
                                    <h:outputText value="Email: " />
                                    <p:inputText required="true" label="email" size="40"
                                                 requiredMessage="Email address is required."
                                                 validatorMessage="Invalid email format"
                                                 value="#{newCardManagedBean.c.email}" style="width: 187px">

                                        <f:validateRegex
                                            pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                    </p:inputText>

                                    <h:outputText value="Phone: " />
                                    <p:inputMask value="#{newCardManagedBean.c.phone}" required="true"  requiredMessage="Phone is required." mask="99999999"/>

                                    <h:outputText value="Postal Code: " />
                                    <p:inputMask value="#{newCardManagedBean.c.postalCode}" required="true" requiredMessage="Postal code is required." mask="999-999"/>

                                    <h:outputText value="Address: " />
                                    <p:inputText value="#{newCardManagedBean.c.address}" required="true"/>

                                    <h:outputText value="Residential Status: " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedResidentialStatus}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.residentialStatusOptions}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Residential Type: " />
                                    <p:selectOneMenu value="#{newCardManagedBean.selectedResidentialType}" style="width:187px; height: 30px; line-height: 21px; top:10px" rendered="true" required="true">
                                        <f:selectItems value="#{newCardManagedBean.residentialTypeOptions}" />
                                    </p:selectOneMenu>

                                </h:panelGrid>
                                <div class="register-form-button">
                                    <p:commandButton value="Back" type="button" onclick="PF('myWizard').back();" />
                                    <p:commandButton value="Next" type="button" onclick="PF('myWizard').next();"/>

                                </div>
                            </p:panel>
                        </p:tab>


                        <p:tab id="confirm" title="5. Confirmation">
                            <p:panel>
                                <p:scrollPanel id="confirmation" style="height:238px">
                                    <h:panelGrid columns="2" columnClasses="label, value">
                                        <h:outputText value="Credit Card Account: " />
                                        <h:outputText value="#{newCardManagedBean.selectedProductName}" styleClass="outputLabel"/>

                                        <h:outputText value="Name Appear on Card: " />
                                        <h:outputText value="#{newCardManagedBean.cca.nameOnCard}" styleClass="outputLabel"/>

                                        <h:outputText value="Identity Number: " />
                                        <h:outputText value="#{newCardManagedBean.c.identityNumber}" styleClass="outputLabel"/>

                                        <h:outputText value="Email: " />
                                        <h:outputText value="#{newCardManagedBean.c.email}" styleClass="outputLabel"/>

                                        <h:outputText value="Phone: " />
                                        <h:outputText value="#{newCardManagedBean.c.phone}" styleClass="outputLabel"/>
                                    </h:panelGrid>

                                </p:scrollPanel>

                                <div class="register-form-button" style="margin-top: 0px">
                                    <p:commandButton value="Back" type="button" onclick="PF('myWizard').back();" />
                                    <p:commandButton value="Confirm" action="#{newCardManagedBean.saveUpdatedCreditCardOrder()}" update="growl" process="@this"/>
                                </div>
                            </p:panel>
                        </p:tab>
                    </p:wizard>

                </h:form>
            </div>
        </f:view>
    </cc:implementation>
</html>